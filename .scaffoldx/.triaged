---
source: C:\Users\henry\Documents\Obsidian\Main\02_INBOX\PROJECTS\whisperdog.md
triaged_at: 2025-12-30T16:30:00Z
triaged_by: x-source-triage
version: 3.2.0
---

# Triage Record

**Source**: whisperdog.md
**Triaged**: 2025-12-30
**Project**: C:\__dev\_projects\whisperdog

## Summary

- Tasks created: 4
- Tasks modified: 1
- Issues created: 7

## Decisions

- Task 0003 split: Mic Test Screen only (WD-0006, WD-0007, WD-0008 extracted)
- Task 0005 created: MP4 Drag-Drop Support (from Task 0003 split)
- Task 0004 modified: WD-0002 (Icons/Padding) moved to Task 0001
- Task 0001 updated: Added Spacing utility to Phase 4

## Entities

### Tasks

| ID | Name | Status | Action |
|----|------|--------|--------|
| 0001 | WhisperDog Rebranding | in_progress | modified |
| 0002 | Error Handling & Retry Mechanism | todo | created |
| 0003 | Mic Test Screen | todo | created |
| 0004 | UI/UX Improvements | todo | modified |
| 0005 | MP4 Drag-Drop Support | todo | created |

### Issues

| ID | Alias | Name |
|----|-------|------|
| ISS_00001 | BUG-003 | File size validation before OpenAI submission |
| ISS_00002 | BUG-001 | Dropdown resets on hotkey activation |
| ISS_00003 | BUG-002 | Pipeline button disabled after recording |
| ISS_00004 | WD-0005 | Large recording warning prompt |
| ISS_00005 | WD-0010 | Log line breaks for readability |
| ISS_00006 | WD-0006 | Min non-silence threshold |
| ISS_00007 | WD-0007 | Sticky recording warning |

## Disposition

Source ready for archival: `x-source-delegated --project WD`

---

# User Testing Journey

**Purpose**: Incremental test log - grows as issues are implemented
**Resume**: Use back-references below to open issue/task in new session

## Quick Commands

```bash
x-issue-start <ID>   # Resume working on an issue
x-issue-list         # See all issues
mvn package          # Build app
```

---

## Completed Work

### [1] ISS_00001 - File Size Validation âœ…

**Back-reference**: `x-issue-start 00001` â†’ `.scaffoldx/xissues/active/0001-0300/ISS_00001_file_size_validation.md`
**Related Task**: Blocks Task 0002 (Error Handling)
**Code Location**: `OpenAITranscribeClient.java:193-204`

**What was done**:
- Added `MAX_COMPRESSED_FILE_SIZE` constant (26MB)
- Added validation after compression, before API call
- Throws IOException with user-friendly message
- Logs error with file details

**To test**:
- [ ] Build: `mvn package`
- [ ] Record long audio (45+ min to exceed 26MB after compression)
- [ ] Verify error: `"Compressed file is X.XX MB, exceeds 26MB limit"`
- [ ] Verify NO API call made

**Test result**:

---

### [2] ISS_00002 - Dropdown Resets on Hotkey âœ…

**Back-reference**: `x-issue-start 00002` â†’ `.scaffoldx/xissues/resolved/2025-12/ISS_00002_...`
**Related Task**: Task 0004 (UI/UX)
**Code Location**: `RecorderForm.java:86, 254-256, 970-997`

**What was done**:

- Added `isPopulatingComboBox` flag (line 86)
- ItemListener now ignores events when flag is true (lines 254-256)
- `populatePostProcessingComboBox()` sets flag before repopulating, clears in finally (lines 970-997)

**Root cause**: When `addItem()` auto-selects the first item during repopulation, the ItemListener fired and corrupted the saved UUID in config. This caused the NEXT repopulation to restore the wrong pipeline.

**To test**:
- [ ] Build: `mvn package`
- [ ] Select Pipeline B (not the first one)
- [ ] Press hotkey â†’ record briefly â†’ stop
- [ ] Verify dropdown still shows Pipeline B
- [ ] Navigate away (Settings) and back â†’ verify Pipeline B still selected
- [ ] Close/reopen app â†’ verify Pipeline B persists

**Test result**:

---

### [3] ISS_00003 - Pipeline Button Disabled After Recording âœ…

**Back-reference**: `x-issue-start 00003` â†’ `.scaffoldx/xissues/active/0001-0300/ISS_00003_pipeline_button_disabled.md`
**Related Task**: Task 0004 (UI/UX)
**Code Location**: `RecorderForm.java:1001-1002`

**What was done**:

- Added explicit `updateRunPipelineButtonState()` call after `populatePostProcessingComboBox()` completes
- The `isPopulatingComboBox` flag was blocking ItemListener events, preventing button state refresh
- Fix ensures button state is always updated after dropdown repopulation

**Root cause**: The `isPopulatingComboBox` flag (added for ISS_00002) blocked the ItemListener from calling `updateRunPipelineButtonState()`. After dropdown repopulation, the button state wasn't updated, leaving it disabled even when transcription was available.

**To test**:

- [ ] Build: `mvn package`
- [ ] Record audio â†’ Stop recording
- [ ] Verify "Run Pipeline" button is enabled after transcription completes
- [ ] Navigate away (Settings) and back â†’ verify button state correct
- [ ] Record again â†’ verify button enables after transcription
- [ ] Verify no need to toggle dropdown to enable button

**Test result**:

---

### [4] ISS_00004 - Large Recording Warning Prompt âœ…

**Back-reference**: `x-issue-start 00004` â†’ `.scaffoldx/xissues/active/0001-0300/ISS_00004_large_recording_prompt.md`
**Related Task**: Task 0002 (Error Handling)
**Code Location**: `SilenceRemover.java:28-61, 238-340` | `RecorderForm.java:1203-1244` | `LargeRecordingWarningDialog.java` (new)

**What was done**:

- Added `SilenceAnalysisResult` class with duration, silence ratio, and threshold checking
- Added `analyzeForSilence()` method for pre-flight analysis without processing
- Created `LargeRecordingWarningDialog` with metrics display and Transcribe/Cancel buttons
- Integrated into `AudioTranscriptionWorker` before silence removal
- Added graceful cancellation handling with user notification

**Root cause**: N/A - New feature implementation

**To test**:

- [ ] Build: `mvn package`
- [ ] Record audio for 10+ minutes with mostly silence (or use a long silent audio file)
- [ ] Stop recording â†’ verify warning dialog appears
- [ ] Check dialog shows: Duration, Silence %, Estimated useful audio
- [ ] Click "Cancel" â†’ verify transcription aborts with "Transcription cancelled" notification
- [ ] Record again â†’ click "Transcribe Anyway" â†’ verify transcription proceeds normally
- [ ] Record short audio (< 10 min) â†’ verify NO dialog appears
- [ ] Record 10+ min audio with < 50% silence â†’ verify NO dialog appears

**Test result**:

---

### [5] ISS_00005 - Log Line Breaks âœ…

**Back-reference**: `x-issue-start 00005` â†’ `.scaffoldx/xissues/active/0001-0300/ISS_00005_log_line_breaks.md`
**Related Task**: Task 0004 (UI/UX)
**Code Location**: `ConsoleLogger.java:60-68` | `RecorderForm.java:700, 816, 1315`

**What was done**:

- Added `logTranscript()` method to ConsoleLogger with blank lines before/after
- Transcript text logged without timestamp prefix for easy selection
- Integrated at all three transcription completion points in RecorderForm

**Root cause**: N/A - Enhancement. Transcript text was not being displayed in the console log at all.

**To test**:

- [ ] Build: `mvn package`
- [ ] Record audio â†’ Stop â†’ Verify transcription appears in console log
- [ ] Check blank line BEFORE transcript text
- [ ] Check blank line AFTER transcript text
- [ ] Verify transcript has NO timestamp prefix (easy triple-click selection)
- [ ] Test chunked transcription (large file) â†’ same formatting
- [ ] Test Faster-Whisper â†’ same formatting

**Test result**:

---

### [6] ISS_00006 - Min Speech Duration Threshold âœ…

**Back-reference**: `x-issue-start 00006` â†’ `.scaffoldx/xissues/active/0001-0300/ISS_00006_min_non_silence_threshold.md`
**Related Task**: Task 0003 (Mic Test Screen - extracted)
**Code Location**: `ConfigManager.java:333-341` | `SettingsForm.java:437-486` | `MinSpeechDurationDialog.java` (new) | `RecorderForm.java:1249-1283`

**What was done**:

- Added `minSpeechDuration` setting to ConfigManager (default: 0.5s)
- Added slider in Settings â†’ Audio (range: 0-2.0 seconds)
- Created MinSpeechDurationDialog with Discard/Transcribe Anyway buttons
- Integrated check after silence analysis, before transcription

**Root cause**: N/A - New feature. Prevents wasted API calls on accidental/noise recordings.

**To test**:

- [ ] Build: `mvn package`
- [ ] Settings â†’ Audio â†’ verify "Min speech duration" slider appears
- [ ] Record < 0.5s of speech â†’ verify warning dialog appears
- [ ] Click "Discard" â†’ verify transcription cancelled
- [ ] Record again â†’ click "Transcribe Anyway" â†’ verify transcription proceeds
- [ ] Record 1+ seconds of speech â†’ verify NO dialog appears
- [ ] Set slider to 0 â†’ verify feature disabled (no dialog ever)

**Test result**:

---

### [7] ISS_00007 - Sticky Recording Warning âœ…

**Back-reference**: `x-issue-start 00007` â†’ `.scaffoldx/xissues/active/0001-0300/ISS_00007_sticky_recording_warning.md`
**Related Task**: Task 0003 (Mic Test Screen - extracted)
**Code Location**: `ConfigManager.java:801-822` | `SettingsForm.java:48, 489-537, 942-952` | `RecorderForm.java:89-93, 110-148, 1056-1158` | `TrayIconManager.java:19, 23, 79-115`

**What was done**:

- Added `recordingWarningDuration` setting to ConfigManager (default: 120s / 2 min)
- Added slider in Settings â†’ Audio (range: 0-10 min, 0 = disabled)
- Added Timer in RecorderForm that checks every 500ms if recording exceeds threshold
- Visual warning: pulsing orange status circle + button text shows elapsed time
- Tray icon updates status text to "âš  Recording is getting long..."
- Console log shows warning message when threshold exceeded

**Root cause**: N/A - New feature. Reminds users when recording exceeds configured duration to prevent accidentally long recordings.

**To test**:

- [ ] Build: `mvn package`
- [ ] Settings â†’ Audio â†’ verify "Warn after recording" slider appears
- [ ] Set slider to 30 seconds for quick testing
- [ ] Record for 30+ seconds â†’ verify:
  - Status circle pulses orange
  - Button shows elapsed time with âš  icon
  - Console log shows warning message
  - Tray icon tooltip changes (if app minimized)
- [ ] Stop recording â†’ verify warning indicator clears
- [ ] Set slider to "Off" (0) â†’ verify no warning appears regardless of duration

**Test result**:

---

## Pending Work

> Entries added as work completes. Each includes back-reference and test steps.

### Tasks

| ID | Name | Status |
|----|------|--------|
| 0001 | WhisperDog Rebranding | ðŸŸ¡ In Progress |
| 0002 | Error Handling & Retry Mechanism | ðŸ”´ Todo |
| 0003 | Mic Test Screen | ðŸ”´ Todo |
| 0004 | UI/UX Improvements | ðŸ”´ Todo |
| 0005 | MP4 Drag-Drop Support | ðŸ”´ Todo |

### Issues

| ID | Alias | Related Task | Status |
|----|-------|--------------|--------|
| ISS_00002 | BUG-001 | Task 0004 | âœ… Resolved |
| ISS_00003 | BUG-002 | Task 0004 | âœ… Resolved |
| ISS_00004 | WD-0005 | Task 0002 | âœ… Resolved |
| ISS_00005 | WD-0010 | Task 0004 | âœ… Resolved |
| ISS_00006 | WD-0006 | (from 0003) | âœ… Resolved |
| ISS_00007 | WD-0007 | (from 0003) | âœ… Resolved |

---

## Session Log

| Date | Work |
|------|------|
| 2025-12-31 | ISS_00001 implemented, testing journey started |
| 2025-12-31 | Session transition: TRANS_2025_12_31_001 |
| 2025-12-31 | ISS_00002 resolved - dropdown hotkey reset bug fixed |
| 2025-12-31 | ISS_00003 resolved - pipeline button state after dropdown repopulation |
| 2025-12-31 | Session transition: TRANS_2025_12_31_002 |
| 2025-12-31 | ISS_00004 resolved - large recording warning prompt implemented |
| 2025-12-31 | Session transition: TRANS_2025_12_31_003 |
| 2025-12-31 | ISS_00005 resolved - log line breaks for transcription text |
| 2025-12-31 | ISS_00006 resolved - min speech duration threshold feature |
| 2026-01-01 | ISS_00007 resolved - sticky recording warning (pulsing indicator + tray status) |
